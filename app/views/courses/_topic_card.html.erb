<div class="project-card  status-<%= topic.status %>">
<% topic_instance = topic.topic_instances.order(:version).last %>
<% if topic_instance %>
  <% is_my_topic = topic.owner == current_user %>
  <% if is_my_topic || topic_viewable_by_current_user?(@course, topic) %>
    <% path = course_topic_path(@course, topic) %>

    <%= link_to path, class: "card-link" do %>
      <%= render 'courses/topic_card_contents', topic: topic, topic_instance: topic_instance %>
    <% end %>
  <% else %>
    <%= render 'courses/topic_card_contents', topic: topic, topic_instance: topic_instance %>
  <% end %>
<% end %>
</div>
