<div class="project-card  status-<%= project.status %>">
<% project_instance = project.project_instances.order(:version).last %>
<% if project_instance %>
  <% is_my_topic = project.lecturer? && project.owner == current_user %>
  <% if is_my_topic || project_viewable_by_current_user?(@course, project) %>
    <% path =
      if project.lecturer?
        course_topic_path(@course, project)
      else
        course_project_path(@course, project)
      end %>

    <%= link_to path, class: "card-link" do %>
      <%= render 'courses/project_card_contents', project: project, project_instance: project_instance %>
    <% end %>
  <% else %>
    <%= render 'courses/project_card_contents', project: project, project_instance: project_instance %>
  <% end %>
<% end %>
</div>
