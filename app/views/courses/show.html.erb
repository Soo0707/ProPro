<!DOCTYPE html>
<html lang="en">
<head>
 <%= stylesheet_link_tag "courses.css" %>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title><%= current_user.username %>'s <%= @course.course_name %> Course View</title>
</head>

<body>
 <%= render 'topbar', user: current_user, course: @course %>
 <%= render 'breadcrumb', course: @course %>
 <%= render 'sidebar', course: @course, current_user_enrolment: @current_user_enrolment %>

 <div class="main">
   <header class="course-header">
     <h1><%= @course.course_name.upcase %></h1>
     <h3>Your Course</h3>
   </header>

   <section class="proposal-guidelines" id="proposal-guidelines">
     <div class="container">
       <form>
         <h4>Project Details</h4>
         <h2 class="description-text"><%= @description || "No description available for this course." %></h2>
       </form> 
     </div>
   </section>

   <% if @current_user_enrolment&.coordinator? %>
     <!-- Coordinator View: My Topics, Pending Topics, Pending Proposals -->
     <%= render 'coordinator_section', 
         course: @course, 
         current_user_enrolment: @current_user_enrolment, 
         topic_list: @topic_list,
         current_user: @current_user, 
         pending_proposals: @pending_proposals,
         lecturers: @lecturers %>

   <% elsif @current_user_enrolment&.lecturer? %>
     <!-- Lecturer View: Supervisors Available, My Topics, Pending Proposals -->
     <%= render 'lecturer_section',
         course: @course,
         current_user_enrolment: @current_user_enrolment,
         topic_list: @topic_list,
         current_user: @current_user,
         assigned_proposals: @assigned_proposals,
         lecturers: @lecturers %>

   <% else %>
     <!-- Student View: Supervisors Available, Proposal Status, Available Topics -->
     <%= render 'student_section',
         course: @course,
         current_user_enrolment: @current_user_enrolment,
         topic_list: @topic_list,
         project: @project,
         lecturers: @lecturers %>
   <% end %>
 </div>

 <%= javascript_include_tag "courses", "data-turbo-track": "reload", defer: true %>
</body>
</html>